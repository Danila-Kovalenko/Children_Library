# Отчет по разработке веб-приложения "Детская библиотека"

## Содержание

1. [Введение](#1-введение)
2. [Обзор проекта](#2-обзор-проекта)
3. [Этапы разработки](#3-этапы-разработки)
    - [3.1. Создание и наполнение базы данных](#31-создание-и-наполнение-базы-данных)
    - [3.2. Настройка JDBC-соединения и пула соединений](#32-настройка-jdbc-соединения-и-пула-соединений)
    - [3.3. Разработка JPA-контейнера](#33-разработка-jpa-контейнера)
    - [3.4. Разработка сессионного компонента и EJB-контейнера](#34-разработка-сессионного-компонента-и-ejb-контейнера)
    - [3.5. Разработка пользовательского интерфейса](#35-разработка-пользовательского-интерфейса)
4. [Конфигурация и развертывание](#4-конфигурация-и-развертывание)
    - [4.1. Настройка сервера приложений](#41-настройка-сервера-приложений)
    - [4.2. Развертывание приложения](#42-развертывание-приложения)
5. [Тестирование](#5-тестирование)
6. [Заключение](#6-заключение)

---

## 1. Введение

Целью данного отчета является документирование процесса разработки веб-приложения "Детская библиотека". Приложение предназначено для управления каталогом детских книг, включая функциональность для добавления, редактирования, удаления и просмотра информации о книгах, авторах и категориях. Разработка велась с использованием технологий Java EE, таких как JSP, сервлеты, JDBC, JPA и EJB.

## 2. Обзор проекта

Веб-приложение "Детская библиотека" предназначено для управления коллекцией книг, обеспечивая пользователям удобный интерфейс для взаимодействия с данными. Основные функции приложения включают:

- **Просмотр списка книг**: Пользователи могут просматривать доступные книги, а также информацию об их авторах и категориях.
- **Добавление новых книг**: Возможность добавления новых записей в каталог с указанием всех необходимых деталей.
- **Редактирование и удаление книг**: Управление существующими записями для поддержания актуальности данных.
- **Управление авторами и категориями**: Добавление, редактирование и удаление информации об авторах и категориях книг.
- **Динамическая обработка данных**: Использование сервлетов и EJB для обработки запросов и бизнес-логики приложения.

## 3. Этапы разработки

### 3.1. Создание и наполнение базы данных

Первым этапом разработки было проектирование и создание базы данных, которая будет хранить информацию о книгах, авторах и категориях. База данных была разработана с учетом следующих сущностей:

- **Authors (Авторы)**: Хранит информацию об авторах книг, включая имя, фамилию и биографию.
- **Categories (Категории)**: Содержит категории книг, такие как "Фэнтези", "Приключения" и т.д.
- **Books (Книги)**: Содержит информацию о книгах, включая название, автора, категорию, год издания и ISBN.

После создания схемы базы данных были разработаны SQL-скрипты для наполнения таблиц минимальным набором данных. Это позволило провести тестирование функциональности приложения на начальном этапе разработки.

### 3.2. Настройка JDBC-соединения и пула соединений

Для взаимодействия приложения с базой данных использовалась технология JDBC. Было необходимо настроить пул соединений (Connection Pool) для эффективного управления ресурсами и повышения производительности приложения.

**Основные шаги настройки:**

1. **Конфигурация пула соединений**: В файле конфигурации сервера приложений был определен ресурс DataSource с параметрами подключения к базе данных, такими как URL, имя пользователя, пароль, драйвер JDBC и параметры пула (максимальное количество соединений, время ожидания и т.д.).

2. **Интеграция с приложением**: В DAO (Data Access Object) классах было реализовано получение соединений из пула вместо прямого создания новых соединений. Это обеспечило повторное использование существующих соединений и снизило накладные расходы на установку новых соединений с базой данных.

### 3.3. Разработка JPA-контейнера

Для облегчения взаимодействия с базой данных и реализации объектно-реляционного отображения (ORM) использовалась технология JPA (Java Persistence API).

**Основные шаги разработки:**

1. **Конфигурация `persistence.xml`**: В файле конфигурации JPA была определена единица персистентности (`persistence-unit`), указаны классы сущностей (`Author`, `Category`, `Book`), а также параметры подключения к базе данных и свойства Hibernate (используемого провайдера JPA).

2. **Аннотирование моделей**: Классы моделей были аннотированы соответствующими JPA-аннотациями (`@Entity`, `@Table`, `@Id`, `@GeneratedValue`, `@ManyToOne`, `@OneToMany` и т.д.) для определения сущностей и их связей.

3. **Создание DAO-классов**: Были разработаны DAO-классы для каждой сущности, реализующие методы CRUD (создание, чтение, обновление, удаление) с использованием `EntityManager` для взаимодействия с базой данных через JPA.

### 3.4. Разработка сессионного компонента и EJB-контейнера

Для реализации бизнес-логики приложения использовались EJB (Enterprise JavaBeans). Было создано бессостоящее сессионное EJB-компонент для управления операциями с книгами.

**Основные шаги разработки:**

1. **Создание EJB-сервисов**: Разработан `BookService` как бессостоящий сессионный EJB, аннотированный `@Stateless`. Этот сервис предоставляет методы для добавления, получения, обновления и удаления книг, взаимодействуя с DAO-классами.

2. **Внедрение зависимостей**: Использовались аннотации `@EJB` и `@Inject` для внедрения сервисов и DAO-компонентов в контроллеры и другие части приложения.

3. **Интеграция с сервлетами**: Сервлеты (`BookController` и `HelloServlet`) были обновлены для использования EJB-сервисов вместо прямого взаимодействия с DAO. Это позволило разделить бизнес-логику и логику представления, повысив модульность и поддерживаемость кода.

### 3.5. Разработка пользовательского интерфейса

Для создания пользовательского интерфейса использовались JSP-страницы и фрагменты.

**Основные шаги разработки:**

1. **Создание JSP-фрагментов**: Были разработаны отдельные JSP-фрагменты для повторяющихся частей интерфейса, такие как заголовок (`header.jspf`) и подвал (`footer.jspf`). Эти фрагменты включались в основные JSP-страницы с помощью директивы включения.

2. **Разработка основных JSP-страниц**:
    - **Главная страница (`index.jsp`)**: Представляет общую информацию о приложении и предоставляет навигацию.
    - **Страница списка книг (`books.jsp`)**: Отображает таблицу с доступными книгами и предоставляет ссылки для редактирования, удаления и просмотра деталей каждой книги.
    - **Страница добавления книги (`addBook.jsp`)**: Предоставляет форму для ввода информации о новой книге.
    - **Страница редактирования книги (`editBook.jsp`)**: Позволяет редактировать существующую книгу.
    - **Страница деталей книги (`bookDetails.jsp`)**: Отображает подробную информацию о выбранной книге.
    - **Страница приветствия через EJB (`helloEJB.jsp`)**: Демонстрирует работу сервлета и взаимодействие с EJB-компонентами.

3. **Использование JSTL**: Для упрощения работы с данными и управления потоком на JSP-страницах использовалась библиотека JSTL (JavaServer Pages Standard Tag Library).

## 4. Конфигурация и развертывание

### 4.1. Настройка сервера приложений

Для развертывания приложения использовался сервер WildFly, который поддерживает Java EE и предоставляет необходимые контейнеры для JPA и EJB.

**Основные шаги настройки:**

1. **Установка WildFly**: Скачивание и распаковка последней версии WildFly.

2. **Настройка пула соединений**: В конфигурационном файле сервера WildFly был добавлен ресурс DataSource для подключения к базе данных MySQL. Также был настроен драйвер JDBC для MySQL, включая создание модуля `com.mysql` с соответствующими зависимостями и драйвером.

3. **Конфигурация JPA и EJB**: Убедились, что файл `persistence.xml` корректно настроен и указывает на созданный DataSource. EJB-компоненты были автоматически обнаружены и развернуты сервером WildFly при развертывании приложения.

### 4.2. Развертывание приложения

**Основные шаги развертывания:**

1. **Сборка приложения**: Использование инструментов сборки, таких как Maven или Gradle, для компиляции исходного кода и упаковки приложения в WAR-файл (`ChildLibrary.war`).

2. **Размещение WAR-файла**: Копирование WAR-файла в каталог `standalone/deployments/` WildFly. Сервер автоматически развернет приложение и настроит его.

3. **Проверка развертывания**: Использование административной консоли WildFly для проверки состояния развертывания и устранения возможных ошибок.

4. **Доступ к приложению**: Открытие браузера и переход по адресу `http://localhost:8080/ChildLibrary/index.jsp` для проверки работоспособности приложения.

## 5. Тестирование

После развертывания приложения проведено комплексное тестирование всех функциональных возможностей:

1. **Тестирование базы данных**: Проверка корректности создания и наполнения базы данных, а также правильности связей между таблицами.

2. **Тестирование DAO-классов**: Убедились в правильности выполнения CRUD-операций через DAO-классы с использованием JPA.

3. **Тестирование EJB-сервисов**: Проверка взаимодействия сервлетов с EJB-сервисами и корректности выполнения бизнес-логики.

4. **Тестирование пользовательского интерфейса**: Проверка всех JSP-страниц на наличие ошибок отображения, корректности работы форм и навигации.

5. **Тестирование производительности**: Оценка работы приложения при одновременном доступе нескольких пользователей и нагрузке на пул соединений.

6. **Тестирование безопасности**: Проведение базовых проверок на доступность данных и корректность обработки вводимых пользователем данных.

## 6. Заключение

В результате проведенной работы было успешно разработано и развернуто веб-приложение "Детская библиотека", обладающее всеми необходимыми функциями для управления каталогом детских книг. Использование современных технологий Java EE, таких как JSP, сервлеты, JDBC, JPA и EJB, обеспечило высокую модульность, масштабируемость и поддерживаемость приложения.

**Ключевые достижения проекта:**

- **Модульная архитектура**: Разделение приложения на слои (модель, доступ к данным, сервисный слой, контроллеры, представление) обеспечило удобство разработки и поддержки.
- **Использование ORM (JPA)**: Облегчило работу с базой данных и позволило сосредоточиться на бизнес-логике.
- **Внедрение EJB**: Позволило централизовать бизнес-логику и обеспечить управление транзакциями.
- **Оптимизация ресурсов**: Настройка пула соединений и использование пулов EJB-компонентов повысили производительность приложения.